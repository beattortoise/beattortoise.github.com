$(function(){function a(a){function s(a){for(var s=0;s<a.length;s++)e+='<div class="margin30 r_list"><div class="header_box clear"><div class="header_left"><a href="data.html"><img src="images/Company/'+a[s].CompLogo+'" /></a><a class="right_button" href="data.html">+ 关注</a></div><div class="header_right"><a href="data.html" class="r_title">'+a[s].Name+"</a><p>平均收益："+100*a[s].AverageIncome+"% <span></span>              投资期限："+a[s].InvestmentTerm+"</p><p>上线时间："+a[s].OnlineTime+"  <span></span>     注册资本："+a[s].RegisteredCapital+"   <span></span>      注册地："+a[s].RegisteredProvince+"</p></div></div></div>";n.html(e)}var i="http://m.boardwalk.cn/api/sk/GetCompanyPagingListByCondition",e="";$.ajax({type:"get",data:a,url:i,success:function(n){var n=$.parseJSON(n);s(n.CompanyList);var t=$(".result span");t.html(n.rowCount);new Page({wrap:$(".page_list"),url:i,data:a,type:"json",totalPage:Math.ceil(n.rowCount/20),callback:function(a,i){e="";var a=$.parseJSON(a);s(a.CompanyList)}})}});var n=$(".result_list")}var s=$(".sift"),i=[],e=[],n=[],t=[],l=s.find(".s_right"),r=s.find(".s_mid"),o={province:0,income:0,onlineTime:0,platForm:0,pageIndex:1,pageSize:20};a(o),r.on("click","a",function(){var s=$(this);if(s.hasClass("active"))s.removeClass("active");else{s.addClass("active");var l=s.closest("tr");l.hasClass("province")&&(o.province=0,i.length=0),l.hasClass("profit")&&(o.income=0,e.length=0),l.hasClass("onlineTime")&&(o.onlineTime=0,n.length=0),l.hasClass("plat")&&(o.platForm=0,t.length=0),l.find(".s_right").find("a").removeClass("active"),o.pageIndex=1,a(o)}}),l.on("click","a",function(){var s=$(this),l=s.closest("tr");s.hasClass("active")?(s.removeClass("active"),l.hasClass("province")&&i.splice($.inArray(s.html(),i),1),l.hasClass("profit")&&e.splice($.inArray(s.data("val"),e),1),l.hasClass("onlineTime")&&n.splice($.inArray(s.data("val"),n),1),l.hasClass("plat")&&t.splice($.inArray(s.data("val"),t),1),l.find(".s_right .active").length||l.find(".s_mid").find("a").addClass("active")):(s.addClass("active"),l.find(".s_mid").find("a").removeClass("active"),l.hasClass("province")&&(i.push(s.html()),$(".province").find(".s_mid").find("a").removeClass("active")),l.hasClass("profit")&&(e.push(s.data("val")),$(".profit").find(".s_mid").find("a").removeClass("active")),l.hasClass("onlineTime")&&(n.push(s.data("val")),$(".onlineTime").find(".s_mid").find("a").removeClass("active")),l.hasClass("plat")&&(t.push(s.data("val")),$(".plat").find(".s_mid").find("a").removeClass("active"))),o={province:i.join(",")||0,income:e.join(",")||0,onlineTime:n.join(",")||0,platForm:t.join(",")||0,pageIndex:1,pageSize:20},a(o)})});