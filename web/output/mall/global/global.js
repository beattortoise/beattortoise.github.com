var F={};F.parseURL=function(t){var a=document.createElement("a");t=t||window.location.href,a.href=t;var e=a.pathname.replace(/^\//,"").split("/");return{source:t,protocol:a.protocol.replace(":",""),host:a.hostname,port:a.port,query:a.search,params:function(){for(var t,e={},r=a.search.replace(/^\?/,"").split("&"),s=r.length,i=0;s>i;i++)r[i]&&(t=r[i].split("="),e[t[0]]=t[1]);return e}(),file:(a.pathname.match(/\/([^\/?#]+)$/i)||[,""])[1],hash:a.hash.replace("#",""),path:a.pathname.replace(/^([^\/])/,"/$1"),relative:(a.href.match(/tps?:\/\/[^\/]+(.+)/)||[,""])[1],segments:e,controller:e[0]?e[0]:"index",action:"undefined"==typeof e[1]||!isNaN(e[1])||e[1].indexOf("html")>-1?"index":e[1]}};var PageHtml=function(t){this.opts=$.extend({wrap:"",num:3,currentPage:1,totalPage:0,next:!0,prev:!0},t),this.init()};PageHtml.prototype={init:function(){this.setStyle(this.opts.currentPage)},setStyle:function(t){this.currentPage=t,this.totalPage=this.opts.totalPage;var a="",e=1,r=this.opts.totalPage,s=this.opts.num,i=2*s+3,n=(i+1)/2;this.currentPage=parseInt(this.currentPage);var h=function(t){var a=F.parseURL().source,e=/page=([0-9]*)/;if(e.test(a)){parseInt(RegExp.$1);a=a.replace(e,"page="+t)}else a=F.parseURL().path+"?page="+t;return a};this.opts.prev&&this.currentPage>1&&(a+='<a class="prev"  data-value='+this.currentPage+' href="'+h(this.currentPage-1)+'"> &lt;</a>');var p=function(t,a){return a=a||"","current"==a?'<a href="'+h(t)+'" class="curr page">'+t+"</a>":"dot"==a?"<span>&nbsp;</span>":'<a href="'+h(t)+'" class="page" title="第'+t+'页">'+t+"</a>"},o=p("","dot"),l=p("","dot")+p(this.totalPage);if(this.totalPage<=i)for(var c=1;c<=this.totalPage;c++)a+=this.currentPage==c?p(c,"current"):p(c);else if(this.currentPage<=n){for(var c=1;c<=i-1;c++)a+=this.currentPage==c?p(c,"current"):p(c);a+=l}else{a+=p(1),a+=o,e=this.currentPage-s,r=this.currentPage+s,this.totalPage-this.currentPage<=s+1&&(r=this.totalPage,e=this.totalPage-(2*s+1));for(var c=e;c<=r;c++)a+=this.currentPage==c?p(c,"current"):p(c);r!=this.totalPage&&(a+=l)}this.$wrap=$(this.opts.wrap),this.$page=$('<div class="global_page">'),this.opts.next&&this.currentPage<this.totalPage&&(a+='<a class="next" data-value='+this.currentPage+' href="'+h(this.currentPage+1)+'">&gt; </a>'),(this.totalPage<=1||isNaN(this.totalPage))&&(a=""),this.$page.html(a),this.$wrap.empty().append(this.$page)}};var Page=function(t){this.opts=$.extend({wrap:"",num:3,currentPage:1,totalPage:0,data:{},url:"",type:"json",next:!0,prev:!0,loadWrap:"",callback:function(t,a,e){}},t),this.init()};Page.prototype={init:function(){this.dataCache={};var t=F.parseURL().params.page;t?(this.setStyle(t),this.getData(t)):this.setStyle(this.opts.currentPage)},setStyle:function(t){this.currentPage=t,this.totalPage=this.opts.totalPage;var a="",e=1,r=this.opts.totalPage,s=this.opts.num,i=2*s+3,n=(i+1)/2;this.currentPage=parseInt(this.currentPage);var h=F.parseURL().query,p=h.search(/page=/);h=h.slice(p+5),this.opts.prev&&(a+='<a class="prev" style="display: none" data-value='+this.currentPage+' href="javascript:;"> &lt;</a>',h&&h>1&&$(".global_page").find(".prev").show().data("value",h));var o=function(t,a){return a=a||"","current"==a?'<a href="javascript:;" class="curr page">'+t+"</a>":"dot"==a?"<span>&nbsp;</span>":'<a href="javascript:;" class="page" title="第'+t+'页">'+t+"</a>"},l=o("","dot"),c=o("","dot")+o(this.totalPage);if(this.totalPage<=i)for(var p=1;p<=this.totalPage;p++)a+=this.currentPage==p?o(p,"current"):o(p);else if(this.currentPage<=n){for(var p=1;p<=i-1;p++)a+=this.currentPage==p?o(p,"current"):o(p);a+=c}else{a+=o(1),a+=l,e=this.currentPage-s,r=this.currentPage+s,this.totalPage-this.currentPage<=s+1&&(r=this.totalPage,e=this.totalPage-(2*s+1));for(var p=e;p<=r;p++)a+=this.currentPage==p?o(p,"current"):o(p);r!=this.totalPage&&(a+=c)}this.$wrap=$(this.opts.wrap),this.$page=$('<div class="global_page">'),this.opts.next&&(a+='<a class="next" data-value='+this.currentPage+' href="javascript:;">&gt; </a>'),this.totalPage<=1&&(a=""),this.$page.html(a),this.$wrap.empty().append(this.$page),this.$pageNum=this.$page.find("a"),this.bindEvent()},bindEvent:function(){var t=this;this.$page.on("click",".page",function(){var a=$(this);if(a.hasClass("curr"))return!1;t.currentPage=parseInt(a.text()),t.setStyle(t.currentPage),t.getData(t.currentPage),1==t.currentPage?$(".global_page").find(".prev").hide():$(".global_page").find(".prev").show(),t.currentPage>=t.opts.totalPage&&$(".global_page").find(".next").hide();var e=F.parseURL().query.replace(/[?&]page=(\d)*/,""),r=""===e?"all":e.split("=")[1];window.history.pushState&&window.history.pushState({page:t.currentPage,type:r},""),1==this.currentPage?$(".global_page").find(".prev").hide():$(".global_page").find(".prev").show(),this.currentPage>=t.opts.totalPage&&$(".global_page").find(".next").hide();var e=F.parseURL().query.replace(/[?&]page=(\d)*/,""),r=(e+(e.indexOf("?")>-1?"&":"?")+"page="+this.currentPage,""===e?"all":e.split("=")[1]);return!1}),this.$page.on("click",".prev",function(){var a=$(this),e=a.data("value")-1;e>=1&&(t.setStyle(e),t.getData(e)),1==e?$(".global_page").find(".prev").hide():$(".global_page").find(".prev").show()}),this.$page.on("click",".next",function(){var a=$(this),e=a.data("value")+1;e<=t.opts.totalPage&&(t.setStyle(e),t.getData(e)),$(".global_page").find(".prev").show(),e>=t.opts.totalPage&&$(".global_page").find(".next").hide()})},getData:function(t){var a=this;return this.currentPage=t,this.opts.loadWrap&&this.opts.loadWrap.html('<div class="load_wrap"><span class="loading"></span></div>'),this.dataCache[this.currentPage]?void(this.opts.callback&&this.opts.callback(this.dataCache[this.currentPage],this.currentPage,!0)):void("html"==this.opts.type?$.get(this.opts.url,$.extend({page:a.currentPage},this.opts.data),function(t){a.dataCache[a.currentPage]=t,a.opts.callback&&a.opts.callback(t,a.currentPage,!1)}):(this.opts.data.pageIndex=a.currentPage,$.get(this.opts.url,this.opts.data,function(t){a.dataCache[a.currentPage]=t,a.opts.callback&&a.opts.callback(t,a.currentPage,!1)},"json")))}},$(function(){var t=$(".search_icon"),a=$(".search_btn");t.click(function(){var t=$.trim(a.val())||"";window.location.href="nlist.html?name="+t}),a.keydown(function(a){$(this);13==a.which&&t.click()})});